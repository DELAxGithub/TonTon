# TonTon 実装ガイドライン

## 最終更新
- 日時: 2024-04-29
- 更新者: Claude
- ステータス: Active

## 1. 全般的なガイドライン

### 1.1 コーディングスタイル
- TypeScriptの厳格な型チェックを有効化
- ESLintとPrettierの設定に従う
- 命名規則は`camelCase`を基本とする

### 1.2 ファイル構成
- 1ファイル1コンポーネント
- インターフェースは別ファイルに定義
- テストファイルは`.test.ts(x)`で終わる名前

### 1.3 エラー処理
- 例外は適切にキャッチ
- エラーメッセージは日本語で明確に
- ユーザーへのフィードバックを必ず提供

## 2. React Native固有のガイドライン

### 2.1 コンポーネント設計
- 関数コンポーネントを使用
- Hooksを積極的に活用
- Propsの型定義を必ず行う

### 2.2 状態管理
- ローカル状態はuseState
- グローバル状態はMMKVを使用
- 複雑な状態遷移はuseReducerを検討

### 2.3 パフォーマンス最適化
- useMemoとuseCallbackの適切な使用
- 大きなリストにはFlatList使用
- 画像の最適化を徹底

## 3. データ管理

### 3.1 ストレージ
- MMKVを使用（高速なネイティブストレージ）
- キー名は`domain:category:id`形式
- 暗号化が必要なデータは専用のストレージクラスを使用

### 3.2 HealthKit連携
- 権限取得は必要最小限に
- バックグラウンド更新を考慮
- エラー時の代替データフローを用意

### 3.3 カロリー貯金の計算
- 計算ロジックは独立したクラスに
- 単位変換は専用のユーティリティ使用
- 履歴データの整合性を保持

## 4. UI/UXガイドライン

### 4.1 デザインシステム
- コンポーネントライブラリの活用
- 一貫したカラースキーム
- アクセシビリティへの配慮

### 4.2 レスポンシブ対応
- Flexboxレイアウトの活用
- 画面サイズに応じた最適化
- 異なる解像度での表示確認

### 4.3 アニメーション
- ネイティブドライバの使用
- 60FPSを維持
- 過度なアニメーションを避ける

## 5. テスト

### 5.1 ユニットテスト
- Jestを使用
- カバレッジ80%以上を目標
- モックの適切な使用

### 5.2 E2Eテスト
- Detoxを使用
- 主要フローのテスト
- デバイス固有の動作確認

## 6. セキュリティ

### 6.1 データ保護
- 個人情報の暗号化
- セキュアなストレージの使用
- 通信の暗号化

### 6.2 認証・認可
- 生体認証の活用
- トークンの安全な管理
- セッション管理の実装

## 関連ドキュメント
- [プロジェクト構造](../structure.md)
- [開発フロー](../flow.md)
- [テストガイドライン](./testing.md) 